# Changelog

## [1.1.0](https://github.com/akrantz01/tailfed/compare/v1.0.0...v1.1.0) (2025-04-12)


### Features

* **terraform:** add lambda function module ([76216a7](https://github.com/akrantz01/tailfed/commit/76216a7e8f31c0326c838969dd3e2ead15c1fbd9))
* **terraform:** create and integrate generator lambda function ([f6bd9a1](https://github.com/akrantz01/tailfed/commit/f6bd9a164298d7680816f25e6a5b1c091440a137))


### Bug Fixes

* **finalizer:** pass handler serve function ([218cc83](https://github.com/akrantz01/tailfed/commit/218cc830e0f8b750600d2da0b5ee6c1ea574fa7e))
* **generator:** pull bucket name from environment ([d3acad5](https://github.com/akrantz01/tailfed/commit/d3acad5486f5eaeee1b688653f2a21e1e912b501))

## 1.0.0 (2025-04-12)


### Features

* **api:** allow multiple ports in start request ([07590c8](https://github.com/akrantz01/tailfed/commit/07590c81113a11ff262f7a603df1f58271294692))
* **api:** create api client ([d21ac29](https://github.com/akrantz01/tailfed/commit/d21ac29eb7e5352e85b3f896fa636ee1ffee8411))
* **api:** create shared api types ([c6ded37](https://github.com/akrantz01/tailfed/commit/c6ded37748f0e4046c371e94686f4cd589bcbde9))
* **api:** permit only one listen port per address type ([438caaa](https://github.com/akrantz01/tailfed/commit/438caaa7173966b2dadfb4ef77d2308708a2c122))
* **api:** redefine signature contents ([5f448f0](https://github.com/akrantz01/tailfed/commit/5f448f074d265b4e758da2a8f579eb5f4facbf87))
* **api:** use base url in request building ([acff777](https://github.com/akrantz01/tailfed/commit/acff7771d5c3e7fb24139136649d9e94b5e68bf3))
* **api:** use bytes type for signing secret ([463706c](https://github.com/akrantz01/tailfed/commit/463706c6bdf9040cc47ebbf3600177e137906832))
* **cli:** add basic structure with version command ([d9f4625](https://github.com/akrantz01/tailfed/commit/d9f4625546ff5c23bfe0bc55a6115c10658b6b72))
* **cli:** add run/start scaffolD ([28eb63c](https://github.com/akrantz01/tailfed/commit/28eb63cc130eac965377188ba0b355669f693460))
* **client:** add executable entrypoint ([6167437](https://github.com/akrantz01/tailfed/commit/6167437b2c7e672d7cb95041f78f857efb3bff4e))
* **cli:** integrate refresher ([4d2d992](https://github.com/akrantz01/tailfed/commit/4d2d992a7bf3cb4d2cdca1aecf7f5e79210bbbd8))
* **cli:** read configuration from environment variables and file ([d5f8b8d](https://github.com/akrantz01/tailfed/commit/d5f8b8d80ff86a578594b6694c886ace4ec26f57))
* **configloader:** add support for .env ([1c9691e](https://github.com/akrantz01/tailfed/commit/1c9691ed29ce91b8645cb3d941e8590afc199d79))
* **configloader:** extract into separate package ([ccbc57b](https://github.com/akrantz01/tailfed/commit/ccbc57be4f6df6707c4f4a38b9d43412502fc583))
* **configloader:** make .env file optional ([2b8a31d](https://github.com/akrantz01/tailfed/commit/2b8a31dad26fbb94e397cba24aa3dfca1e7175fa))
* **configloader:** make flag loading optional ([3a2f566](https://github.com/akrantz01/tailfed/commit/3a2f566b08255c41a9bad951d8f06140290acba1))
* **dev-gateway:** add storage backend creation ([9b93864](https://github.com/akrantz01/tailfed/commit/9b93864547a9ed39bf17c398d51f0b4a99cdf1fe))
* **dev-gateway:** implement local api gateway ([9559eb6](https://github.com/akrantz01/tailfed/commit/9559eb6c6daaa19da207bf9973876b1baaeba36a))
* **dev-gateway:** initialize tailscale api client ([c72d86d](https://github.com/akrantz01/tailfed/commit/c72d86d78c394c2639e7669bc57a4405b2e5c483))
* **dev-gateway:** register initializer lambda ([6a594e4](https://github.com/akrantz01/tailfed/commit/6a594e45351355de282ce30099cce977ab0d7d48))
* **dev:** add mock local launcher ([897007d](https://github.com/akrantz01/tailfed/commit/897007d945b140ede522270855889e1a593a06bb))
* **dev:** allow switching between filesystem and dynamo storage ([2fb5bc7](https://github.com/akrantz01/tailfed/commit/2fb5bc724d2651b540eead037215adbaddc6e4ba))
* **dev:** allow switching between memory and kms signers ([462b23e](https://github.com/akrantz01/tailfed/commit/462b23ef03b4d46d8ea23fd5ca67bdb1d0432f02))
* **dev:** integrate generator into dev binary ([0750ebc](https://github.com/akrantz01/tailfed/commit/0750ebc7d454b5fc5263fe0e80299923e382425f))
* **dev:** integrate signer for finalizer ([53a1fec](https://github.com/akrantz01/tailfed/commit/53a1fec1066467f4485dd93e880b8cb396c0db79))
* **dev:** integrate verifier into mock local launcher ([608e8ed](https://github.com/akrantz01/tailfed/commit/608e8edd60ddd2709369187e26436994d69940d8))
* **dev:** register finalizer endpoint ([955d183](https://github.com/akrantz01/tailfed/commit/955d1834f9396677d58d8459a6b4196447b6f79d))
* **finalizer:** implement base structure without token signing ([a109845](https://github.com/akrantz01/tailfed/commit/a109845a6afad8cc3d8cdcff2820e2a4d3d48e2a))
* **finalizer:** integrate token signing ([a85f9a5](https://github.com/akrantz01/tailfed/commit/a85f9a5c9da3c49a7669c34e4378144c3241dc73))
* **finalizer:** use dynamodb-backed storage ([040c717](https://github.com/akrantz01/tailfed/commit/040c71795846826a8f9cb94a1181ead4c13b5cb7))
* **finalizer:** use kms-based signer ([bc993f8](https://github.com/akrantz01/tailfed/commit/bc993f89f007197202df8e5097247f66ff607c21))
* **generator:** implement oidc metadata generator ([0fd8d24](https://github.com/akrantz01/tailfed/commit/0fd8d243ee65dc4324dfc26efe8783ed3a71948f))
* **http:** add api gateway response generators ([52d81d9](https://github.com/akrantz01/tailfed/commit/52d81d9cea4d212f77d2a088f4aa798c5262dcd6))
* **http:** add domain to gateway translation ([2360b27](https://github.com/akrantz01/tailfed/commit/2360b275b96fb65e1088c2feeae6b9293b5b51c2))
* **http:** add gateway request/response translation ([8bae5b0](https://github.com/akrantz01/tailfed/commit/8bae5b059868b8eea290143cdc60df7c0ffbeba2))
* **http:** add request id middleware ([51b5fde](https://github.com/akrantz01/tailfed/commit/51b5fdeda47452293754bb70c42c334917e15a36))
* **http:** expose mock gateway id, domain, and url ([9f354a0](https://github.com/akrantz01/tailfed/commit/9f354a0987e1b17af185e12de64b0e05b323e48a))
* **initializer:** add base implementation ([027cc94](https://github.com/akrantz01/tailfed/commit/027cc94e33989db15bf2a3bcdf7bf848563e6742))
* **initializer:** add component name to logger ([1cad4b2](https://github.com/akrantz01/tailfed/commit/1cad4b2a71c578fa7d4a9e7ad3bb8de3238b223d))
* **initializer:** add lambda entrypoint ([52c44cb](https://github.com/akrantz01/tailfed/commit/52c44cb0c16997bf5fd4d3cb27d3f57647678f86))
* **initializer:** add launching verification handlers ([46425b7](https://github.com/akrantz01/tailfed/commit/46425b7a4654cb5d40424f67278b73921a9c6c6a))
* **initializer:** use dynamodb-backed storage ([c86b799](https://github.com/akrantz01/tailfed/commit/c86b799c61fb726a42a1425303a7873fcaaf56de))
* **launcher:** add channel-backed implementation for development ([0591b1d](https://github.com/akrantz01/tailfed/commit/0591b1d18dffe0fc2d33a743d6bb3eda7c901490))
* **logging:** add basic logging facilities ([8612dc8](https://github.com/akrantz01/tailfed/commit/8612dc8eff0780f0647124c823a70f5260541fd9))
* **logging:** allow injecting logger into arbitrary context ([0d9710a](https://github.com/akrantz01/tailfed/commit/0d9710afd29319d47dead1c4133072e06f582ba6))
* **logging:** implement middleware ([2e70127](https://github.com/akrantz01/tailfed/commit/2e7012706d172b2fcf84426685353754ef00b7c2))
* **logging:** use global logger ([4331de2](https://github.com/akrantz01/tailfed/commit/4331de270e4ed3b49ef84594287d2fbfd72046b9))
* **metadata:** add filesystem and s3 metadata storage backends ([ad0becf](https://github.com/akrantz01/tailfed/commit/ad0becf00e140111eb161e9bd703e17e658faa9a))
* **metadata:** add minimal oidc discovery document ([a275775](https://github.com/akrantz01/tailfed/commit/a2757752bf849d41d7760716a6bf52ad0eb2b2d3))
* **refresher:** add callback server logging ([ad3daa2](https://github.com/akrantz01/tailfed/commit/ad3daa2da7e918533aa4111cf3efacf92b2c9bfc))
* **refresher:** add start issuance process ([4a00ac7](https://github.com/akrantz01/tailfed/commit/4a00ac78dd259461d35d8407dce78583a9f0f200))
* **refresher:** immediately spawn finalizer job ([5858ecc](https://github.com/akrantz01/tailfed/commit/5858eccd3e908116d3dc4acd923dd82142177301))
* **refresher:** implement callback server ([5502b13](https://github.com/akrantz01/tailfed/commit/5502b138781d4b5797102bd157935353591ce053))
* **refresher:** implement finalization flow ([97d5377](https://github.com/akrantz01/tailfed/commit/97d5377ac833b22cd0a93a36715cdf6cf3542d10))
* **scheduler:** add scheduler wrapper around gocron ([2332faf](https://github.com/akrantz01/tailfed/commit/2332faf00ba748d21de9d706e63a9ba052355d19))
* **scheduler:** use manual implementation instead of gocron ([b6b2be7](https://github.com/akrantz01/tailfed/commit/b6b2be74f4fef57d91c947ff6fd039d4b5a77e81))
* **signing:** add in-memory signing backend ([da6ec58](https://github.com/akrantz01/tailfed/commit/da6ec58181fc2a64d655c60db69698f09cfe9f46))
* **signing:** implement retrieving public keys from kms ([5cb5fbc](https://github.com/akrantz01/tailfed/commit/5cb5fbc6ba1da3775933669807d1a97a679fbf87))
* **signing:** implement signing tokens via AWS KMS ([7a1f827](https://github.com/akrantz01/tailfed/commit/7a1f827fbb3aee086bb8527cff0df891165b2a04))
* **signing:** use fingerprint for key id ([99c45df](https://github.com/akrantz01/tailfed/commit/99c45dfeca13097cbcfd15714182cd9698e8cf33))
* **storage:** add dynamodb-backed storage ([d9157d3](https://github.com/akrantz01/tailfed/commit/d9157d362b7a000552028ff79ab88529a503795b))
* **storage:** add filesystem-backed implmentation ([94206c8](https://github.com/akrantz01/tailfed/commit/94206c8a422cd129adad52a229116cef4a1e87f1))
* **tailscale:** add control plane client wrapper ([acc7935](https://github.com/akrantz01/tailfed/commit/acc79356ba2862a0f4033e15b027107f7c152c35))
* **tailscale:** add local tailscale client wrapper ([9f052e0](https://github.com/akrantz01/tailfed/commit/9f052e0078e51868e1f27a3c8d50fde069fda465))
* **terraform:** add api gateway with resources ([0bb7afc](https://github.com/akrantz01/tailfed/commit/0bb7afc8f82c0a8e4e90c63db64959ece91341d8))
* **terraform:** add bucket with openid configuration data ([558dbca](https://github.com/akrantz01/tailfed/commit/558dbca6111f5c3854fd409b2a2b6145fdd2548a))
* **terraform:** add dynamodb storage ([3dd09a0](https://github.com/akrantz01/tailfed/commit/3dd09a0d1284155ca920516dead2bc593374b7ae))
* **terraform:** add event bridge schedule for generator ([d90c551](https://github.com/akrantz01/tailfed/commit/d90c5517e1e11c37b4336060dd20070ecb6bd04a))
* **terraform:** add kms key for signing ([20ac7a2](https://github.com/akrantz01/tailfed/commit/20ac7a2a795ed042ce30d23ae2c80decd3fca610))
* **terraform:** add routes to s3 objects ([2ed9c84](https://github.com/akrantz01/tailfed/commit/2ed9c8476c048caa3211a8c9b22a9a1b7761ad1b))
* **terraform:** create infrastructure scaffolding ([570a441](https://github.com/akrantz01/tailfed/commit/570a4413d7acc3e88b746a9136c1140801eb39f9))
* **terraform:** create initial deployment ([95da042](https://github.com/akrantz01/tailfed/commit/95da04293ba2d9afc3c5495d210128f3b381d58a))
* **verifier:** add component name to logger ([e087912](https://github.com/akrantz01/tailfed/commit/e087912ffe5540f1cf6fc84dfb791bb5a382dbcf))
* **verifier:** add initial implementation ([a23d4ab](https://github.com/akrantz01/tailfed/commit/a23d4ab97d102d7941e1c1cc9cfbd60f753aad36))
* **verifier:** connect to tailscale in-process ([47a11dc](https://github.com/akrantz01/tailfed/commit/47a11dc4b9262b2a073d0bc61d65010df4ee14df))
* **verifier:** set app name in tailscale connection ([cabf761](https://github.com/akrantz01/tailfed/commit/cabf7610c00a82418967822839a7e062a7eed37e))
* **verifier:** use dynamodb-backed storage ([f02e5d8](https://github.com/akrantz01/tailfed/commit/f02e5d87644e5fa30c29dbb0ff6c73b019c479f3))


### Bug Fixes

* **api:** add missing content-type and accept headers ([53e1f5c](https://github.com/akrantz01/tailfed/commit/53e1f5c889311fd2080b1c0f9c094815fc03c8c2))
* **api:** ensure base url is present before parsing ([227b580](https://github.com/akrantz01/tailfed/commit/227b580fc700265bb00f5faf50e1669549328a1a))
* **api:** use correct casing for start response signging secret ([343f960](https://github.com/akrantz01/tailfed/commit/343f9607376e2a53e3927d59b1598426f4e8bcbf))
* **dev:** document kms backend in flag ([4d8c875](https://github.com/akrantz01/tailfed/commit/4d8c8754f80ad9ac0a3169837fee0e4e65268ffa))
* **dev:** stop verifier retry loop on fatal error ([5496356](https://github.com/akrantz01/tailfed/commit/5496356bbf90f6c5fd7f19350ce502fcda543888))
* golangci-lint integration with lint-staged ([b41cf4f](https://github.com/akrantz01/tailfed/commit/b41cf4f70dd8a89b0f5de565d6330832db6269ce))
* **refresher:** configure missing exponential backoff ([7f2987a](https://github.com/akrantz01/tailfed/commit/7f2987a6e57f9c9205466baf84dc75ad57d126c0))
* **refresher:** ensure assumption about number of ips is held ([b502c75](https://github.com/akrantz01/tailfed/commit/b502c7581e1f1cd0741c761c5a84223cc8374004))
* **refresher:** release listeners on api error ([08f6164](https://github.com/akrantz01/tailfed/commit/08f61645034eb8e0b1a0e885bb2cad38c0d68a95))
* **scheduler:** ensure job is first run on startup ([d910734](https://github.com/akrantz01/tailfed/commit/d910734e29243282f8b31e908df1167c495e5660))
* **signing:** add missing algorithm for kms public keys ([ebfa620](https://github.com/akrantz01/tailfed/commit/ebfa620acfe62cc0dddd021073e7e795a6068c2b))
* **signing:** ensure pointer to public key is used for jwk ([931a67f](https://github.com/akrantz01/tailfed/commit/931a67fd2daa771c8b1a55776a8e9fbc47584715))
* **signing:** remove unnecessary pem decoding for kms public keys ([65dbed2](https://github.com/akrantz01/tailfed/commit/65dbed2230d22c1fb8d145fec6554f1bc82f1fbf))
* **storage:** ensure status is deserialized properly ([44580d8](https://github.com/akrantz01/tailfed/commit/44580d8d2179434e21fc28ac945704fc6b674072))
* **tailscale:** trim trailing dot from local dns name ([42f3ee6](https://github.com/akrantz01/tailfed/commit/42f3ee60b42b25dcb45ff97cee5944184246befa))
* **terraform:** add missing list bucket permission ([f211c98](https://github.com/akrantz01/tailfed/commit/f211c98e9ead123bdec6640985c5b7960863befb))
* **verifier:** deserialize challenge with correct type ([8c2114a](https://github.com/akrantz01/tailfed/commit/8c2114a461056d5287f9f4a3dd0b725cf99b66f9))
* **verifier:** make flow id fields consistent across components ([e5c22be](https://github.com/akrantz01/tailfed/commit/e5c22be54ecb21052d791c97a4bcfe3fb3ae5479))
* **verifier:** pull proxy url from environment ([e05a335](https://github.com/akrantz01/tailfed/commit/e05a335dcbc1119102a86ccc54f45ad47ece5694))
