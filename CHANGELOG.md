# Changelog

## [1.2.0](https://github.com/akrantz01/tailfed/compare/v1.1.0...v1.2.0) (2025-05-05)


### Features

* **api:** add method for retrieving daemon config ([6c137a8](https://github.com/akrantz01/tailfed/commit/6c137a89f2da684271ac3972d01a5bad8e0c9de9))
* **api:** allow retrieving api version info ([eea04c3](https://github.com/akrantz01/tailfed/commit/eea04c36375f83f1a14f02e4fe5539ab31745d8c))
* **api:** provide rich error details on api failure ([1a0fc60](https://github.com/akrantz01/tailfed/commit/1a0fc6011e43e19cc7f8e6d64ffd6b35010c85c7))
* **cli:** add command for force refreshing ([6adf230](https://github.com/akrantz01/tailfed/commit/6adf2308a4320f673a365ef6b475a5472a28e1c2))
* **cli:** add command for generating configuration file ([ec0f49f](https://github.com/akrantz01/tailfed/commit/ec0f49febce9a3b34cb4e444ad0ad13e6a1a5a81))
* **cli:** add systemd integration ([a0a759c](https://github.com/akrantz01/tailfed/commit/a0a759c54d744e66e9b592b4b86c584cc1043c63))
* **cli:** add user agent header to http client ([f47c0b2](https://github.com/akrantz01/tailfed/commit/f47c0b28ca42aa332a73020f4436ec658da07c13))
* **cli:** allow refreshing token via SIGHUP ([8806ad1](https://github.com/akrantz01/tailfed/commit/8806ad1a7ea2d94209349e6977b2f11d647c4f29))
* **cli:** expose version flag ([50aa4c3](https://github.com/akrantz01/tailfed/commit/50aa4c3b111baab5c960fe3e680ba07e799a3262))
* **cli:** perform basic config url validation ([f2f97e1](https://github.com/akrantz01/tailfed/commit/f2f97e193c42183a0cf8d7f89d7a5670fefef6d4))
* **cli:** retrieve refresh frequency from remote daemon config ([5b8fe63](https://github.com/akrantz01/tailfed/commit/5b8fe63305da8c925ce9857b3fe7d40f00117666))
* **cli:** verify remote api version on startup ([4aba2a4](https://github.com/akrantz01/tailfed/commit/4aba2a48d7eab81d376d05274b5b8c53cf96adf1))
* **cli:** write the daemon's pid to a file ([2a51ae4](https://github.com/akrantz01/tailfed/commit/2a51ae43e34df80466e6fb0101954661bc11f055))
* **configloader:** allow loading values from parameter store and secrets manager ([62edaf8](https://github.com/akrantz01/tailfed/commit/62edaf82020a174d63f818abe949458c03eb6831))
* **configloader:** expose wrapper around raw config ([02c7196](https://github.com/akrantz01/tailfed/commit/02c7196daf27b10dc18d68358c736c806a145535))
* **configloader:** support loading secrets from files ([dd38cde](https://github.com/akrantz01/tailfed/commit/dd38cde542ef51ee119d8cc2a1d456b414d1ad57))
* **dev:** add healthcheck endpoint ([9583859](https://github.com/akrantz01/tailfed/commit/9583859372dce4365dc9d8589ec30dc92fe70b91))
* **dev:** add support for headscale ([808e1e6](https://github.com/akrantz01/tailfed/commit/808e1e69767220e34642ebeb7e64b93ebacdcaf6))
* **dev:** allow switching between local and step function launcher ([399617c](https://github.com/akrantz01/tailfed/commit/399617ccd8dc865173ad3757018ef26f05f8ab96))
* **dev:** expose daemon config document ([b4f898c](https://github.com/akrantz01/tailfed/commit/b4f898c417453b57defcce68a7733ee1bf050417))
* **dev:** expose version document ([697dcaf](https://github.com/akrantz01/tailfed/commit/697dcaf49b971090ea784b2d64630a0d51b15026))
* **dev:** expose version flag ([a26e92f](https://github.com/akrantz01/tailfed/commit/a26e92feecb4cebd044ef7eb648ad5b0912b0c50))
* **finalizer:** add basic config validation ([eff73ad](https://github.com/akrantz01/tailfed/commit/eff73ad7d50f65ec6b930cee06062b43e78ce255))
* **finalizer:** add support for custom domains ([0e1a16a](https://github.com/akrantz01/tailfed/commit/0e1a16ab0540bfd0816f3566cdf7fe60e2d18c82))
* **finalizer:** allow loading config from secrets ([80c3581](https://github.com/akrantz01/tailfed/commit/80c358113d37500337ba66aa691144caa6e3cd7b))
* **finalizer:** distinguish between unverified and failed challenges ([283062c](https://github.com/akrantz01/tailfed/commit/283062c797653e125f84e2b7dd88bf4353048ee1))
* **finalizer:** manually construct issuer url ([5659d2d](https://github.com/akrantz01/tailfed/commit/5659d2d334de90051d16567b1092e120cb9a939c))
* **generator:** add basic config validation ([7fc0c6e](https://github.com/akrantz01/tailfed/commit/7fc0c6eac627cd88a4af874870d89c45e42db7ac))
* **generator:** add document for daemon config ([ab1e6ce](https://github.com/akrantz01/tailfed/commit/ab1e6ce87155ba59429ffa9cd9ab25628b722c87))
* **generator:** allow loading config from secrets ([22e05eb](https://github.com/akrantz01/tailfed/commit/22e05eb7b07c91fcfd061a7c677ee9c7a852c90e))
* **http:** add helper for internal server errors ([236e102](https://github.com/akrantz01/tailfed/commit/236e10232e565e6ae72e91a0d3ff58a9053dc94c))
* **initializer:** add basic config validation ([71c0faf](https://github.com/akrantz01/tailfed/commit/71c0faf6ca528d24fcaecb670b94cba9094126bc))
* **initializer:** add support for headscale ([228e552](https://github.com/akrantz01/tailfed/commit/228e552101e5bcd67ed0acf22d80bd4218de2999))
* **initializer:** allow loading config from secrets ([8f7ca7d](https://github.com/akrantz01/tailfed/commit/8f7ca7d1fb99589cc3a5168bc70824b5c3103a6f))
* **initializer:** use step function-backed launcher ([b77ec9a](https://github.com/akrantz01/tailfed/commit/b77ec9a71b4eb6ef88dc99fcf0ca4434fd93cb53))
* **launcher:** add step function-backed implementation ([2810daa](https://github.com/akrantz01/tailfed/commit/2810daa6a6e8c15906aef847229ccd349ed4a7a0))
* **launcher:** improve logging ([73a9cc5](https://github.com/akrantz01/tailfed/commit/73a9cc5a44830ea4b861d7857f864abebdb73622))
* **metadata:** improve logging ([1de13e1](https://github.com/akrantz01/tailfed/commit/1de13e17188e51a71122a6d345a97096e94841ff))
* **metadata:** include extra claims in metadata document ([a572fc9](https://github.com/akrantz01/tailfed/commit/a572fc97e703406f2cc29dae15278d3ec0a9f221))
* **nix:** write token to runtime dir ([dc9aed7](https://github.com/akrantz01/tailfed/commit/dc9aed73d65f1717888b80234b6b5cc9972a055a))
* **oidc:** conditionally populate non-tags in amr claim ([e795e4f](https://github.com/akrantz01/tailfed/commit/e795e4f5e93d4849651fdd5e4b5e62671ae2472b))
* **oidc:** re-structure claims for use within aws ([45b6405](https://github.com/akrantz01/tailfed/commit/45b64059b44d4fca21e2cbcfb25dce7a71cc0ec2))
* **refresher:** add signature debug logging ([a417c41](https://github.com/akrantz01/tailfed/commit/a417c41b1545a0dcb4782f28c185bc92736a0718))
* **refresher:** automatically cleanup listeners regardless of finalization result ([6fa1ff8](https://github.com/akrantz01/tailfed/commit/6fa1ff80353649ee95f0366ed49a44373ce19c10))
* **refresher:** handle permanenty and transient errors ([c527423](https://github.com/akrantz01/tailfed/commit/c527423ebd0e33702a9606ee85e486c6ca802831))
* **refresher:** make failed refresh initializations transient ([103c69c](https://github.com/akrantz01/tailfed/commit/103c69c1500fda839d78c5b88891d6711983c97a))
* **refresher:** make tailscale client status errors transient ([b94264c](https://github.com/akrantz01/tailfed/commit/b94264cc520b2be02fc9f00f6c601f23f5db1137))
* **refresher:** make token directory permissive if not exists ([2325948](https://github.com/akrantz01/tailfed/commit/2325948672fedd73b7fb74253e4c0b292a4bcd90))
* **scheduler:** allow immediately running job ([8b20652](https://github.com/akrantz01/tailfed/commit/8b206529821d13330b40e0370a2c55b1fc72a57d))
* **scheduler:** allow transient errors to be retried ([97978d9](https://github.com/akrantz01/tailfed/commit/97978d94ce57bc4dd021b6f995c9b7c378915162))
* **signing:** extend claims in token ([cbf8f5d](https://github.com/akrantz01/tailfed/commit/cbf8f5dcd6c629b9d4b09800f2b81989b507f3a4))
* **signing:** improve logging ([729c1f7](https://github.com/akrantz01/tailfed/commit/729c1f73eaef47f70c967592a8ee1eec8252d183))
* **storage:** add extra api fields to flow metadata ([2891b53](https://github.com/akrantz01/tailfed/commit/2891b53fdb8ced4c42714c6cda14a4ab777804ed))
* **storage:** improve logging ([8353736](https://github.com/akrantz01/tailfed/commit/8353736496ff70df82b0aab2663001fbec47acbf))
* **tailscale:** add support for custom base url ([34910f2](https://github.com/akrantz01/tailfed/commit/34910f2f1d81c000f9b0a49d5cd5a8a472723555))
* **tailscale:** add support for headscale control plane ([c0549cc](https://github.com/akrantz01/tailfed/commit/c0549cc004ad1ef6d19e99dd4bff362bac00c4cb))
* **tailscale:** add support for plaintext headscale connections ([e4ad8b3](https://github.com/akrantz01/tailfed/commit/e4ad8b37c79ac521d5d26dc5a13f62047e8ee141))
* **tailscale:** extend information returned for nodes ([9fb9c5b](https://github.com/akrantz01/tailfed/commit/9fb9c5bd3ed1b692faeb3741aa6999e2cf39da08))
* **tailscale:** handle headscale node not found ([44b5df9](https://github.com/akrantz01/tailfed/commit/44b5df914f61009a14f897a94eb8df7007035eec))
* **tailscale:** improve logging ([b4b6b05](https://github.com/akrantz01/tailfed/commit/b4b6b05fc92449ca8e32f3cdd16701c91add815d))
* **terraform:** add extra step to mark flows as failed ([886df10](https://github.com/akrantz01/tailfed/commit/886df10eb860e146cf34d9889c411f9599e49fa6))
* **terraform:** add module for binding lambda to api gateway ([fcce5df](https://github.com/akrantz01/tailfed/commit/fcce5df9b7824b0698d74225dc421fc795d01660))
* **terraform:** add other lambda functions ([b1c0d71](https://github.com/akrantz01/tailfed/commit/b1c0d71a9badede160e2c482c8e6fa09c9704cb4))
* **terraform:** add required iam permissions for generator ([6229762](https://github.com/akrantz01/tailfed/commit/62297625bd88fa7bb52c3608fed02fd252f0076b))
* **terraform:** add support for custom domains ([82f054b](https://github.com/akrantz01/tailfed/commit/82f054b85b969456ca34632f17670716dcf94f4e))
* **terraform:** allow applying additional lambda execution role policies ([d102f89](https://github.com/akrantz01/tailfed/commit/d102f8956df5c1b6eae50a04fe367aec3cb15736))
* **terraform:** allow generator to write version and config metadata ([77d1854](https://github.com/akrantz01/tailfed/commit/77d18540644daac504dd2ffb975adc66843f7f16))
* **terraform:** break apart tailscale inputs ([1dee7f7](https://github.com/akrantz01/tailfed/commit/1dee7f70bc45fb9ae22c07969960dd84dcea9a22))
* **terraform:** configure api gateway throttling ([09b8fbd](https://github.com/akrantz01/tailfed/commit/09b8fbd44cd1cf6f1f09b35d3fb3a6335c4b17dc))
* **terraform:** configure finalizer lambda ([27ab6c0](https://github.com/akrantz01/tailfed/commit/27ab6c0be592f1063765639ae93669447e4b5b9a))
* **terraform:** configure function log level ([193be93](https://github.com/akrantz01/tailfed/commit/193be933e5ad621526ac09f5a596b28ea51ba7c0))
* **terraform:** configure initializer lambda ([61511fb](https://github.com/akrantz01/tailfed/commit/61511fbac320546504145421207de30f9f9016db))
* **terraform:** configure verifier lambda ([5720b5c](https://github.com/akrantz01/tailfed/commit/5720b5c582c38cc53628f408c4f1938e9bd9f711))
* **terraform:** create openid connect provider for tailfed ([8fb78c0](https://github.com/akrantz01/tailfed/commit/8fb78c0d97b61ed17f4fa8880cb093dca44eab57))
* **terraform:** create step function workflow ([2432082](https://github.com/akrantz01/tailfed/commit/243208269219b2f3d15838e197e52f4db7ed1e8b))
* **terraform:** enable cors for s3 proxied resources ([daf830b](https://github.com/akrantz01/tailfed/commit/daf830b4f85395a6da396aae6cefcaf2cacfb43a))
* **terraform:** expose lambda function timeout ([f028645](https://github.com/akrantz01/tailfed/commit/f028645e97659293144f1f2f9793153d0503bad9))
* **terraform:** expose new metadata documents ([c557c9b](https://github.com/akrantz01/tailfed/commit/c557c9b0274ed9e84c408e759682fc55351e1158))
* **terraform:** extend verifier function timeout ([22768f3](https://github.com/akrantz01/tailfed/commit/22768f306e5c0abcb5ab9c5eb5dfb9df889d13d2))
* **terraform:** generate required outputs ([f3c5d74](https://github.com/akrantz01/tailfed/commit/f3c5d74fa9e0173cdd50c60bb143148d92284a65))
* **terraform:** link finalizer lambda to gateway route ([b6cc409](https://github.com/akrantz01/tailfed/commit/b6cc4095df1b8007c0eea67d8e92fbf7cd7d22cc))
* **terraform:** link initializer lambda to gateway route ([9e0fc0e](https://github.com/akrantz01/tailfed/commit/9e0fc0ea76587507d0f38ff270a79265596ebc50))
* **terraform:** parallelize address verification ([98b3596](https://github.com/akrantz01/tailfed/commit/98b359607f69aec715f1a62c058e550a990b8811))
* **terraform:** pass full resource arns ([49902c6](https://github.com/akrantz01/tailfed/commit/49902c6d992b9f9b30921ef30bc0fddfdaf7ee15))
* **terraform:** re-trigger api gateway deployment on resource change ([eb55185](https://github.com/akrantz01/tailfed/commit/eb551855249aaf017cbb5836a7ef02dabefb0d33))
* **terraform:** turn configuration into a module ([d9546b8](https://github.com/akrantz01/tailfed/commit/d9546b86bcf6d7b8a264eeaa49313f644d9ea52b))
* **terraform:** update lambda functions on artifact modification ([075a739](https://github.com/akrantz01/tailfed/commit/075a739b42e1e7644e5699ec8e7eb3924d601b4f))
* **tscontrol:** add mock tailscale control plane ([5e03d3f](https://github.com/akrantz01/tailfed/commit/5e03d3f42d7b0402d4c7e3506334af2d9fc78e96))
* **tscontrol:** remove unused binary ([c7b0e43](https://github.com/akrantz01/tailfed/commit/c7b0e432cfcf0ca5ffc6d4d04c9f18144e511d57))
* **verifier:** add basic config validation ([582d1d3](https://github.com/akrantz01/tailfed/commit/582d1d366db141e6d011f6268bb7c913bb999097))
* **verifier:** add signature debug logging ([0c555c3](https://github.com/akrantz01/tailfed/commit/0c555c37feed709e9296f87e6a39872ba52d66df))
* **verifier:** allow loading config from secrets ([dcebd93](https://github.com/akrantz01/tailfed/commit/dcebd93d7d3598e6d5f622791f51f87fa9819a16))


### Bug Fixes

* **cli:** only implement refresh for unix-like systems ([7c76523](https://github.com/akrantz01/tailfed/commit/7c7652334dddb628a0be3aecf69f3742fe69b8fb))
* **configloader:** ignore a non-existent config file ([79d646f](https://github.com/akrantz01/tailfed/commit/79d646f8ad8e350feb0e6f6cf4d5bc25a9bc114f))
* **dev:** add timeout to verifier client ([dc61264](https://github.com/akrantz01/tailfed/commit/dc61264486d59c30daba1beb0afd4b42f5e62bc7))
* **dev:** propagate headscale base url correctly ([4b1fb34](https://github.com/akrantz01/tailfed/commit/4b1fb346bae8ffc73935871160a0aba6b82d5912))
* **finalizer:** flip challenge expiry check ([e622e0a](https://github.com/akrantz01/tailfed/commit/e622e0ae22e91daa3986b0b00e4ec0878c000107))
* **finalizer:** prevent issuing for expired flows ([c5510c8](https://github.com/akrantz01/tailfed/commit/c5510c8562f91557a462b1691e54692416f2eb6c))
* **initializer:** propagate headscale base url correctly ([761a57c](https://github.com/akrantz01/tailfed/commit/761a57cfd64584f4982e0296be99d4f15a89c160))
* **metadata:** fix subject types marshalled name ([9520eed](https://github.com/akrantz01/tailfed/commit/9520eedaa76cc3710fb65cf2326582da0c886d36))
* **metadata:** store with json content type for s3 backend ([265e8a5](https://github.com/akrantz01/tailfed/commit/265e8a5ed69c472e892658b0681458d97f7eb406))
* **oidc:** prevent erroneous empty strings in amr claim ([3591d0d](https://github.com/akrantz01/tailfed/commit/3591d0d076948c4031f4576b4806406869c3c52c))
* **refresher,verifier:** remove os from hmac message ([cb6dcb5](https://github.com/akrantz01/tailfed/commit/cb6dcb535b33a3d750990ee5a01138d76d780989))
* **tailscale:** differentiate between insecure and https transports ([b2461e4](https://github.com/akrantz01/tailfed/commit/b2461e4f5900b83e37de169031bbbe3c2cf32eba))
* **tailscale:** prevent accidental doubling of addresses array ([a0ff087](https://github.com/akrantz01/tailfed/commit/a0ff087e8a3a9016b9233b72cf9b839ce845e67d))
* **tailscale:** prevent erroneous empty strings in tags ([c6efbe2](https://github.com/akrantz01/tailfed/commit/c6efbe2086d7f270ac2a26fddc7bfa30295395e2))
* **tailscale:** prevent tags from being nil ([db27082](https://github.com/akrantz01/tailfed/commit/db27082ef2c85f2e72fc2f5ecee05a485177daba))
* **tailscale:** prevent tailscale tags from being nil ([42d4db0](https://github.com/akrantz01/tailfed/commit/42d4db0fbe1d29b788c7f0413bde53fc3d734981))
* **terraform:** add explicit dependency for generator invocation ([75ac01a](https://github.com/akrantz01/tailfed/commit/75ac01a628f1861d22678fef7d8a3909e39dcdc4))
* **terraform:** add missing generator config options ([4ed2960](https://github.com/akrantz01/tailfed/commit/4ed29608f88dee8b1078d892342856e7588a1855))
* **terraform:** add permissions for step functions to initializer ([604b76a](https://github.com/akrantz01/tailfed/commit/604b76a08afb7516bb0d1ceebed1d5ed9e1390c4))
* **terraform:** configure launcher state machine ([d532599](https://github.com/akrantz01/tailfed/commit/d53259951d0beacb94b8a648a12f305b39eb2ea3))
* **terraform:** correct cloudwatch logs permissions ([d2b67ac](https://github.com/akrantz01/tailfed/commit/d2b67acf1e7fa67f9cc41e46793e7a4aefa33141))
* **terraform:** ensure api gateway deployed after resources created ([406abc7](https://github.com/akrantz01/tailfed/commit/406abc747031a23c7eb14c7ca753cc1c08b588fc))
* **terraform:** ensure auto-update of lambda handlers ([514d43d](https://github.com/akrantz01/tailfed/commit/514d43d9dd4825516522600cb15e7d7c4cce0687))
* **terraform:** ensure generator is invoked when lambda config is changed ([6f73d6e](https://github.com/akrantz01/tailfed/commit/6f73d6e55ec8eddfd0c5d37131bf6223998d8b7b))
* **terraform:** ensure lambda function can write to log group ([008aa4a](https://github.com/akrantz01/tailfed/commit/008aa4a3574468bcab85cfb649839a37cc4e8428))
* **terraform:** ensure s3 api gateway methods always create successfully ([aee1e01](https://github.com/akrantz01/tailfed/commit/aee1e0193f96edbb01b0a2ea3e8afd1f47bdea4d))
* **terraform:** ensure state machine has correct invoke permissions ([407870a](https://github.com/akrantz01/tailfed/commit/407870aea80ca83f976fb4840d66c3bb5650b9ee))
* **terraform:** prevent edge cases in state machine ([3e070d3](https://github.com/akrantz01/tailfed/commit/3e070d3800876ca59d6347ba566cee6c2f5a0750))
* **terraform:** remove auto-creation of iam oidc provider ([1e35ec8](https://github.com/akrantz01/tailfed/commit/1e35ec8f8049ac89375f71883daa5173a6bcce5f))
* **terraform:** use correct issuer url for generator ([f61c1ee](https://github.com/akrantz01/tailfed/commit/f61c1eebff6054a8af754b315b4b03490b1216f8))
* **types:** support un/marshalling duration as nanos or string ([145dadc](https://github.com/akrantz01/tailfed/commit/145dadce32673ca38e2df5e8652ce1c50f4a1f74))
* **verifier:** add http request timeout ([de41b98](https://github.com/akrantz01/tailfed/commit/de41b98e46704feec6356fbff2cc2d1f953452ac))
* **verifier:** correct tailscale hostname ([d44246e](https://github.com/akrantz01/tailfed/commit/d44246e777456f5e40120f8c9e31dd7712031bad))
* **verifier:** wait for tailscale connection to be successful ([3dec890](https://github.com/akrantz01/tailfed/commit/3dec890bb653c61ee60ac53e62363e11f1e9c392))

## [1.1.0](https://github.com/akrantz01/tailfed/compare/v1.0.0...v1.1.0) (2025-04-12)


### Features

* **terraform:** add lambda function module ([76216a7](https://github.com/akrantz01/tailfed/commit/76216a7e8f31c0326c838969dd3e2ead15c1fbd9))
* **terraform:** create and integrate generator lambda function ([f6bd9a1](https://github.com/akrantz01/tailfed/commit/f6bd9a164298d7680816f25e6a5b1c091440a137))


### Bug Fixes

* **finalizer:** pass handler serve function ([218cc83](https://github.com/akrantz01/tailfed/commit/218cc830e0f8b750600d2da0b5ee6c1ea574fa7e))
* **generator:** pull bucket name from environment ([d3acad5](https://github.com/akrantz01/tailfed/commit/d3acad5486f5eaeee1b688653f2a21e1e912b501))

## 1.0.0 (2025-04-12)


### Features

* **api:** allow multiple ports in start request ([07590c8](https://github.com/akrantz01/tailfed/commit/07590c81113a11ff262f7a603df1f58271294692))
* **api:** create api client ([d21ac29](https://github.com/akrantz01/tailfed/commit/d21ac29eb7e5352e85b3f896fa636ee1ffee8411))
* **api:** create shared api types ([c6ded37](https://github.com/akrantz01/tailfed/commit/c6ded37748f0e4046c371e94686f4cd589bcbde9))
* **api:** permit only one listen port per address type ([438caaa](https://github.com/akrantz01/tailfed/commit/438caaa7173966b2dadfb4ef77d2308708a2c122))
* **api:** redefine signature contents ([5f448f0](https://github.com/akrantz01/tailfed/commit/5f448f074d265b4e758da2a8f579eb5f4facbf87))
* **api:** use base url in request building ([acff777](https://github.com/akrantz01/tailfed/commit/acff7771d5c3e7fb24139136649d9e94b5e68bf3))
* **api:** use bytes type for signing secret ([463706c](https://github.com/akrantz01/tailfed/commit/463706c6bdf9040cc47ebbf3600177e137906832))
* **cli:** add basic structure with version command ([d9f4625](https://github.com/akrantz01/tailfed/commit/d9f4625546ff5c23bfe0bc55a6115c10658b6b72))
* **cli:** add run/start scaffolD ([28eb63c](https://github.com/akrantz01/tailfed/commit/28eb63cc130eac965377188ba0b355669f693460))
* **client:** add executable entrypoint ([6167437](https://github.com/akrantz01/tailfed/commit/6167437b2c7e672d7cb95041f78f857efb3bff4e))
* **cli:** integrate refresher ([4d2d992](https://github.com/akrantz01/tailfed/commit/4d2d992a7bf3cb4d2cdca1aecf7f5e79210bbbd8))
* **cli:** read configuration from environment variables and file ([d5f8b8d](https://github.com/akrantz01/tailfed/commit/d5f8b8d80ff86a578594b6694c886ace4ec26f57))
* **configloader:** add support for .env ([1c9691e](https://github.com/akrantz01/tailfed/commit/1c9691ed29ce91b8645cb3d941e8590afc199d79))
* **configloader:** extract into separate package ([ccbc57b](https://github.com/akrantz01/tailfed/commit/ccbc57be4f6df6707c4f4a38b9d43412502fc583))
* **configloader:** make .env file optional ([2b8a31d](https://github.com/akrantz01/tailfed/commit/2b8a31dad26fbb94e397cba24aa3dfca1e7175fa))
* **configloader:** make flag loading optional ([3a2f566](https://github.com/akrantz01/tailfed/commit/3a2f566b08255c41a9bad951d8f06140290acba1))
* **dev-gateway:** add storage backend creation ([9b93864](https://github.com/akrantz01/tailfed/commit/9b93864547a9ed39bf17c398d51f0b4a99cdf1fe))
* **dev-gateway:** implement local api gateway ([9559eb6](https://github.com/akrantz01/tailfed/commit/9559eb6c6daaa19da207bf9973876b1baaeba36a))
* **dev-gateway:** initialize tailscale api client ([c72d86d](https://github.com/akrantz01/tailfed/commit/c72d86d78c394c2639e7669bc57a4405b2e5c483))
* **dev-gateway:** register initializer lambda ([6a594e4](https://github.com/akrantz01/tailfed/commit/6a594e45351355de282ce30099cce977ab0d7d48))
* **dev:** add mock local launcher ([897007d](https://github.com/akrantz01/tailfed/commit/897007d945b140ede522270855889e1a593a06bb))
* **dev:** allow switching between filesystem and dynamo storage ([2fb5bc7](https://github.com/akrantz01/tailfed/commit/2fb5bc724d2651b540eead037215adbaddc6e4ba))
* **dev:** allow switching between memory and kms signers ([462b23e](https://github.com/akrantz01/tailfed/commit/462b23ef03b4d46d8ea23fd5ca67bdb1d0432f02))
* **dev:** integrate generator into dev binary ([0750ebc](https://github.com/akrantz01/tailfed/commit/0750ebc7d454b5fc5263fe0e80299923e382425f))
* **dev:** integrate signer for finalizer ([53a1fec](https://github.com/akrantz01/tailfed/commit/53a1fec1066467f4485dd93e880b8cb396c0db79))
* **dev:** integrate verifier into mock local launcher ([608e8ed](https://github.com/akrantz01/tailfed/commit/608e8edd60ddd2709369187e26436994d69940d8))
* **dev:** register finalizer endpoint ([955d183](https://github.com/akrantz01/tailfed/commit/955d1834f9396677d58d8459a6b4196447b6f79d))
* **finalizer:** implement base structure without token signing ([a109845](https://github.com/akrantz01/tailfed/commit/a109845a6afad8cc3d8cdcff2820e2a4d3d48e2a))
* **finalizer:** integrate token signing ([a85f9a5](https://github.com/akrantz01/tailfed/commit/a85f9a5c9da3c49a7669c34e4378144c3241dc73))
* **finalizer:** use dynamodb-backed storage ([040c717](https://github.com/akrantz01/tailfed/commit/040c71795846826a8f9cb94a1181ead4c13b5cb7))
* **finalizer:** use kms-based signer ([bc993f8](https://github.com/akrantz01/tailfed/commit/bc993f89f007197202df8e5097247f66ff607c21))
* **generator:** implement oidc metadata generator ([0fd8d24](https://github.com/akrantz01/tailfed/commit/0fd8d243ee65dc4324dfc26efe8783ed3a71948f))
* **http:** add api gateway response generators ([52d81d9](https://github.com/akrantz01/tailfed/commit/52d81d9cea4d212f77d2a088f4aa798c5262dcd6))
* **http:** add domain to gateway translation ([2360b27](https://github.com/akrantz01/tailfed/commit/2360b275b96fb65e1088c2feeae6b9293b5b51c2))
* **http:** add gateway request/response translation ([8bae5b0](https://github.com/akrantz01/tailfed/commit/8bae5b059868b8eea290143cdc60df7c0ffbeba2))
* **http:** add request id middleware ([51b5fde](https://github.com/akrantz01/tailfed/commit/51b5fdeda47452293754bb70c42c334917e15a36))
* **http:** expose mock gateway id, domain, and url ([9f354a0](https://github.com/akrantz01/tailfed/commit/9f354a0987e1b17af185e12de64b0e05b323e48a))
* **initializer:** add base implementation ([027cc94](https://github.com/akrantz01/tailfed/commit/027cc94e33989db15bf2a3bcdf7bf848563e6742))
* **initializer:** add component name to logger ([1cad4b2](https://github.com/akrantz01/tailfed/commit/1cad4b2a71c578fa7d4a9e7ad3bb8de3238b223d))
* **initializer:** add lambda entrypoint ([52c44cb](https://github.com/akrantz01/tailfed/commit/52c44cb0c16997bf5fd4d3cb27d3f57647678f86))
* **initializer:** add launching verification handlers ([46425b7](https://github.com/akrantz01/tailfed/commit/46425b7a4654cb5d40424f67278b73921a9c6c6a))
* **initializer:** use dynamodb-backed storage ([c86b799](https://github.com/akrantz01/tailfed/commit/c86b799c61fb726a42a1425303a7873fcaaf56de))
* **launcher:** add channel-backed implementation for development ([0591b1d](https://github.com/akrantz01/tailfed/commit/0591b1d18dffe0fc2d33a743d6bb3eda7c901490))
* **logging:** add basic logging facilities ([8612dc8](https://github.com/akrantz01/tailfed/commit/8612dc8eff0780f0647124c823a70f5260541fd9))
* **logging:** allow injecting logger into arbitrary context ([0d9710a](https://github.com/akrantz01/tailfed/commit/0d9710afd29319d47dead1c4133072e06f582ba6))
* **logging:** implement middleware ([2e70127](https://github.com/akrantz01/tailfed/commit/2e7012706d172b2fcf84426685353754ef00b7c2))
* **logging:** use global logger ([4331de2](https://github.com/akrantz01/tailfed/commit/4331de270e4ed3b49ef84594287d2fbfd72046b9))
* **metadata:** add filesystem and s3 metadata storage backends ([ad0becf](https://github.com/akrantz01/tailfed/commit/ad0becf00e140111eb161e9bd703e17e658faa9a))
* **metadata:** add minimal oidc discovery document ([a275775](https://github.com/akrantz01/tailfed/commit/a2757752bf849d41d7760716a6bf52ad0eb2b2d3))
* **refresher:** add callback server logging ([ad3daa2](https://github.com/akrantz01/tailfed/commit/ad3daa2da7e918533aa4111cf3efacf92b2c9bfc))
* **refresher:** add start issuance process ([4a00ac7](https://github.com/akrantz01/tailfed/commit/4a00ac78dd259461d35d8407dce78583a9f0f200))
* **refresher:** immediately spawn finalizer job ([5858ecc](https://github.com/akrantz01/tailfed/commit/5858eccd3e908116d3dc4acd923dd82142177301))
* **refresher:** implement callback server ([5502b13](https://github.com/akrantz01/tailfed/commit/5502b138781d4b5797102bd157935353591ce053))
* **refresher:** implement finalization flow ([97d5377](https://github.com/akrantz01/tailfed/commit/97d5377ac833b22cd0a93a36715cdf6cf3542d10))
* **scheduler:** add scheduler wrapper around gocron ([2332faf](https://github.com/akrantz01/tailfed/commit/2332faf00ba748d21de9d706e63a9ba052355d19))
* **scheduler:** use manual implementation instead of gocron ([b6b2be7](https://github.com/akrantz01/tailfed/commit/b6b2be74f4fef57d91c947ff6fd039d4b5a77e81))
* **signing:** add in-memory signing backend ([da6ec58](https://github.com/akrantz01/tailfed/commit/da6ec58181fc2a64d655c60db69698f09cfe9f46))
* **signing:** implement retrieving public keys from kms ([5cb5fbc](https://github.com/akrantz01/tailfed/commit/5cb5fbc6ba1da3775933669807d1a97a679fbf87))
* **signing:** implement signing tokens via AWS KMS ([7a1f827](https://github.com/akrantz01/tailfed/commit/7a1f827fbb3aee086bb8527cff0df891165b2a04))
* **signing:** use fingerprint for key id ([99c45df](https://github.com/akrantz01/tailfed/commit/99c45dfeca13097cbcfd15714182cd9698e8cf33))
* **storage:** add dynamodb-backed storage ([d9157d3](https://github.com/akrantz01/tailfed/commit/d9157d362b7a000552028ff79ab88529a503795b))
* **storage:** add filesystem-backed implmentation ([94206c8](https://github.com/akrantz01/tailfed/commit/94206c8a422cd129adad52a229116cef4a1e87f1))
* **tailscale:** add control plane client wrapper ([acc7935](https://github.com/akrantz01/tailfed/commit/acc79356ba2862a0f4033e15b027107f7c152c35))
* **tailscale:** add local tailscale client wrapper ([9f052e0](https://github.com/akrantz01/tailfed/commit/9f052e0078e51868e1f27a3c8d50fde069fda465))
* **terraform:** add api gateway with resources ([0bb7afc](https://github.com/akrantz01/tailfed/commit/0bb7afc8f82c0a8e4e90c63db64959ece91341d8))
* **terraform:** add bucket with openid configuration data ([558dbca](https://github.com/akrantz01/tailfed/commit/558dbca6111f5c3854fd409b2a2b6145fdd2548a))
* **terraform:** add dynamodb storage ([3dd09a0](https://github.com/akrantz01/tailfed/commit/3dd09a0d1284155ca920516dead2bc593374b7ae))
* **terraform:** add event bridge schedule for generator ([d90c551](https://github.com/akrantz01/tailfed/commit/d90c5517e1e11c37b4336060dd20070ecb6bd04a))
* **terraform:** add kms key for signing ([20ac7a2](https://github.com/akrantz01/tailfed/commit/20ac7a2a795ed042ce30d23ae2c80decd3fca610))
* **terraform:** add routes to s3 objects ([2ed9c84](https://github.com/akrantz01/tailfed/commit/2ed9c8476c048caa3211a8c9b22a9a1b7761ad1b))
* **terraform:** create infrastructure scaffolding ([570a441](https://github.com/akrantz01/tailfed/commit/570a4413d7acc3e88b746a9136c1140801eb39f9))
* **terraform:** create initial deployment ([95da042](https://github.com/akrantz01/tailfed/commit/95da04293ba2d9afc3c5495d210128f3b381d58a))
* **verifier:** add component name to logger ([e087912](https://github.com/akrantz01/tailfed/commit/e087912ffe5540f1cf6fc84dfb791bb5a382dbcf))
* **verifier:** add initial implementation ([a23d4ab](https://github.com/akrantz01/tailfed/commit/a23d4ab97d102d7941e1c1cc9cfbd60f753aad36))
* **verifier:** connect to tailscale in-process ([47a11dc](https://github.com/akrantz01/tailfed/commit/47a11dc4b9262b2a073d0bc61d65010df4ee14df))
* **verifier:** set app name in tailscale connection ([cabf761](https://github.com/akrantz01/tailfed/commit/cabf7610c00a82418967822839a7e062a7eed37e))
* **verifier:** use dynamodb-backed storage ([f02e5d8](https://github.com/akrantz01/tailfed/commit/f02e5d87644e5fa30c29dbb0ff6c73b019c479f3))


### Bug Fixes

* **api:** add missing content-type and accept headers ([53e1f5c](https://github.com/akrantz01/tailfed/commit/53e1f5c889311fd2080b1c0f9c094815fc03c8c2))
* **api:** ensure base url is present before parsing ([227b580](https://github.com/akrantz01/tailfed/commit/227b580fc700265bb00f5faf50e1669549328a1a))
* **api:** use correct casing for start response signging secret ([343f960](https://github.com/akrantz01/tailfed/commit/343f9607376e2a53e3927d59b1598426f4e8bcbf))
* **dev:** document kms backend in flag ([4d8c875](https://github.com/akrantz01/tailfed/commit/4d8c8754f80ad9ac0a3169837fee0e4e65268ffa))
* **dev:** stop verifier retry loop on fatal error ([5496356](https://github.com/akrantz01/tailfed/commit/5496356bbf90f6c5fd7f19350ce502fcda543888))
* golangci-lint integration with lint-staged ([b41cf4f](https://github.com/akrantz01/tailfed/commit/b41cf4f70dd8a89b0f5de565d6330832db6269ce))
* **refresher:** configure missing exponential backoff ([7f2987a](https://github.com/akrantz01/tailfed/commit/7f2987a6e57f9c9205466baf84dc75ad57d126c0))
* **refresher:** ensure assumption about number of ips is held ([b502c75](https://github.com/akrantz01/tailfed/commit/b502c7581e1f1cd0741c761c5a84223cc8374004))
* **refresher:** release listeners on api error ([08f6164](https://github.com/akrantz01/tailfed/commit/08f61645034eb8e0b1a0e885bb2cad38c0d68a95))
* **scheduler:** ensure job is first run on startup ([d910734](https://github.com/akrantz01/tailfed/commit/d910734e29243282f8b31e908df1167c495e5660))
* **signing:** add missing algorithm for kms public keys ([ebfa620](https://github.com/akrantz01/tailfed/commit/ebfa620acfe62cc0dddd021073e7e795a6068c2b))
* **signing:** ensure pointer to public key is used for jwk ([931a67f](https://github.com/akrantz01/tailfed/commit/931a67fd2daa771c8b1a55776a8e9fbc47584715))
* **signing:** remove unnecessary pem decoding for kms public keys ([65dbed2](https://github.com/akrantz01/tailfed/commit/65dbed2230d22c1fb8d145fec6554f1bc82f1fbf))
* **storage:** ensure status is deserialized properly ([44580d8](https://github.com/akrantz01/tailfed/commit/44580d8d2179434e21fc28ac945704fc6b674072))
* **tailscale:** trim trailing dot from local dns name ([42f3ee6](https://github.com/akrantz01/tailfed/commit/42f3ee60b42b25dcb45ff97cee5944184246befa))
* **terraform:** add missing list bucket permission ([f211c98](https://github.com/akrantz01/tailfed/commit/f211c98e9ead123bdec6640985c5b7960863befb))
* **verifier:** deserialize challenge with correct type ([8c2114a](https://github.com/akrantz01/tailfed/commit/8c2114a461056d5287f9f4a3dd0b725cf99b66f9))
* **verifier:** make flow id fields consistent across components ([e5c22be](https://github.com/akrantz01/tailfed/commit/e5c22be54ecb21052d791c97a4bcfe3fb3ae5479))
* **verifier:** pull proxy url from environment ([e05a335](https://github.com/akrantz01/tailfed/commit/e05a335dcbc1119102a86ccc54f45ad47ece5694))
